import"../chunks/Bg9kRutz.js";import"../chunks/69_IOA4Y.js";import{P as J,Q,R as ce,x as U,a3 as de,d as _e,s as O,h as F,V as pe,b as ye,t as i,a8 as X,H as me,r as Z,e as $,i as B,Z as he,f as re,g as ne,p as ge,a9 as G,a1 as se,aa as xe,ab as be,n as j,ac as ke,ad as Ee,a0 as Ie,ae as De,af as qe,ag as we,ah as Se,X as Fe,z as Ae,ai as le,aj as Te,ak as P,v as V,F as ee,G as Ce,al as Me,K as Re,M as g,am as Be,L as b,N as Y,J as A,an as Ne,I as He,ao as Le}from"../chunks/KhVf0-1u.js";import{s as T}from"../chunks/BtB4fybk.js";import{i as Ye}from"../chunks/CJhZTRAX.js";import{t as M,a as C}from"../chunks/WJULnI8O.js";import{s as Oe}from"../chunks/Cvl1E9s6.js";import{i as $e,p as N}from"../chunks/CCsVZal9.js";import{i as Ge}from"../chunks/Du9NzFKq.js";let te=!1;function Pe(){te||(te=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const a of t.target.elements)(e=a.__on_r)==null||e.call(a)})},{capture:!0}))}function Ve(t){var e=ce,a=U;J(null),Q(null);try{return t()}finally{J(e),Q(a)}}function We(t,e,a,r=a){t.addEventListener(e,()=>Ve(a));const l=t.__on_r;l?t.__on_r=()=>{l(),r(!0)}:t.__on_r=()=>r(!0),Pe()}function W(t,e){return e}function Ke(t,e,a,r){for(var l=[],f=e.length,v=0;v<f;v++)Ee(e[v].e,l,!0);var y=f>0&&l.length===0&&a!==null;if(y){var s=a.parentNode;Ie(s),s.append(a),r.clear(),w(t,e[0].prev,e[f-1].next)}De(l,()=>{for(var p=0;p<f;p++){var n=e[p];y||(r.delete(n.k),w(t,n.prev,n.next)),qe(n.e,!y)}})}function K(t,e,a,r,l,f=null){var v=t,y={flags:e,items:new Map,first:null};{var s=t;v=F?O(pe(s)):s.appendChild(de())}F&&ye();var p=null,n=!1,m=X(()=>{var u=a();return Ae(u)?u:u==null?[]:se(u)});_e(()=>{var u=i(m),_=u.length;if(n&&_===0)return;n=_===0;let c=!1;if(F){var x=v.data===me;x!==(_===0)&&(v=Z(),O(v),$(!1),c=!0)}if(F){for(var h=null,o,d=0;d<_;d++){if(B.nodeType===8&&B.data===he){v=B,c=!0,$(!1);break}var q=u[d],D=r(q,d);o=ue(B,y,h,null,q,D,d,l,e,a),y.items.set(D,o),h=o}_>0&&O(Z())}F||Ue(u,y,v,l,e,r,a),f!==null&&(_===0?p?re(p):p=ne(()=>f(v)):p!==null&&ge(p,()=>{p=null})),c&&$(!0),i(m)}),F&&(v=B)}function Ue(t,e,a,r,l,f,v){var y=t.length,s=e.items,p=e.first,n=p,m,u=null,_=[],c=[],x,h,o,d;for(d=0;d<y;d+=1){if(x=t[d],h=f(x,d),o=s.get(h),o===void 0){var q=n?n.e.nodes_start:a;u=ue(q,e,u,u===null?e.first:u.next,x,h,d,r,l,v),s.set(h,u),_=[],c=[],n=u.next;continue}if(Xe(o,x,d),(o.e.f&G)!==0&&re(o.e),o!==n){if(m!==void 0&&m.has(o)){if(_.length<c.length){var D=c[0],k;u=D.prev;var L=_[0],E=_[_.length-1];for(k=0;k<_.length;k+=1)ae(_[k],D,a);for(k=0;k<c.length;k+=1)m.delete(c[k]);w(e,L.prev,E.next),w(e,u,L),w(e,E,D),n=D,u=E,d-=1,_=[],c=[]}else m.delete(o),ae(o,n,a),w(e,o.prev,o.next),w(e,o,u===null?e.first:u.next),w(e,u,o),u=o;continue}for(_=[],c=[];n!==null&&n.k!==h;)(n.e.f&G)===0&&(m??(m=new Set)).add(n),c.push(n),n=n.next;if(n===null)continue;o=n}_.push(o),u=o,n=o.next}if(n!==null||m!==void 0){for(var I=m===void 0?[]:se(m);n!==null;)(n.e.f&G)===0&&I.push(n),n=n.next;var S=I.length;if(S>0){var R=y===0?a:null;Ke(e,I,R,s)}}U.first=e.first&&e.first.e,U.last=u&&u.e}function Xe(t,e,a,r){xe(t.v,e),t.i=a}function ue(t,e,a,r,l,f,v,y,s,p){var n=(s&we)!==0,m=(s&Se)===0,u=n?m?be(l):j(l):l,_=(s&ke)===0?v:j(v),c={i:_,v:u,k:f,a:null,e:null,prev:a,next:r};try{return c.e=ne(()=>y(t,u,_,p),F),c.e.prev=a&&a.e,c.e.next=r&&r.e,a===null?e.first=c:(a.next=c,a.e.next=c.e),r!==null&&(r.prev=c,r.e.prev=c.e),c}finally{}}function ae(t,e,a){for(var r=t.next?t.next.e.nodes_start:a,l=e?e.e.nodes_start:a,f=t.e.nodes_start;f!==r;){var v=Fe(f);l.before(f),f=v}}function w(t,e,a){e===null?t.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function ie(t,e,a){if(t.multiple)return Qe(t,e);for(var r of t.options){var l=H(r);if($e(l,e)){r.selected=!0;return}}(!a||e!==void 0)&&(t.selectedIndex=-1)}function ze(t,e){le(()=>{var a=new MutationObserver(()=>{var r=t.__value;ie(t,r)});return a.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{a.disconnect()}})}function Je(t,e,a=e){var r=!0;We(t,"change",l=>{var f=l?"[selected]":":checked",v;if(t.multiple)v=[].map.call(t.querySelectorAll(f),H);else{var y=t.querySelector(f)??t.querySelector("option:not([disabled])");v=y&&H(y)}a(v)}),le(()=>{var l=e();if(ie(t,l,r),r&&l===void 0){var f=t.querySelector(":checked");f!==null&&(l=H(f),a(l))}t.__value=l,r=!1}),ze(t)}function Qe(t,e){for(var a of t.options)a.selected=~e.indexOf(H(a))}function H(t){return"__value"in t?t.__value:t.value}function Ze(){let t=P(N([{name:"Food",expanded:!0,expenses:[{name:"Groceries",amount:100,frequency:{value:1,span:"months"},dueDate:new Date},{name:"Restaurants",amount:50,frequency:{value:1,span:"weeks"},dueDate:new Date}]}])),e=P(N({value:30,span:"days"})),a=P(1),r=ee(()=>[{name:"Actual",frequency:{value:1,span:"days"}},{name:"Bi-Weekly",frequency:{value:2,span:"weeks"}},{name:"Monthly",frequency:{value:1,span:"months"}},{name:"Yearly",frequency:{value:1,span:"years"}},{name:`Every ${i(e).value} ${i(e).span}`,frequency:i(e)}]),l=ee(()=>i(r)[i(a)]);return{get categories(){return i(t)},set categories(s){V(t,N(s))},get allFilters(){return i(r)},get filterIndex(){return i(a)},set filterIndex(s){V(a,N(s))},get currentFilter(){return i(l)},get customFrequency(){return i(e)},set customFrequency(s){V(e,N(s))},changeFrequency:(s,p,n)=>{const m=p.value*(p.span=="weeks"?7:p.span=="months"?30:p.span=="years"?365:1),u=n.value*(n.span=="weeks"?7:n.span=="months"?30:n.span=="years"?365:1);return s*u/m},toFrequencyString:s=>{if(s.value==1)switch(s.span){case"days":return"Daily";case"weeks":return"Weekly";case"months":return"Monthly";case"years":return"Yearly"}return s.value==2&&s.span=="weeks"?"Bi-Weekly":`Every ${s.value} ${s.span}`},toDollarString:s=>`$${s.toFixed(s%1?2:0).replace(/\B(?=(\d{3})+(?!\d))/g,",")}`}}const je=Symbol("budget"),et=()=>{const t=Ze();return Te(je,t)};var tt=M('<option class="filter-option"> </option>'),at=M('<td class="expense-amount svelte-11peko1"> </td> <td class="expense-frequency svelte-11peko1"> </td>',1),rt=M('<td class="expense-amount svelte-11peko1"> </td>'),nt=M('<tr><td class="expense-name svelte-11peko1"> </td><!></tr>'),st=M('<table class="category svelte-11peko1"><thead><tr><th class="category-name svelte-11peko1"> </th><th class="category-filter svelte-11peko1" colspan="2"><select name="filters" class="filter"></select></th></tr></thead><tbody></tbody></table>'),lt=M('<div class="budget-container svelte-11peko1"></div>');function yt(t,e){Ce(e,!1);const a=(f,v=Be)=>{var y=st(),s=b(y),p=b(s),n=b(p),m=b(n,!0);g(n);var u=Y(n),_=b(u);A(()=>{i(r),Ne(()=>{})}),K(_,5,()=>i(r).allFilters,W,(x,h,o)=>{var d=tt();d.value=(d.__value=o)==null?"":o;var q=b(d,!0);g(d),A(()=>{Oe(d,i(r).filterIndex==o),T(q,i(h).name)}),C(x,d)}),g(_),g(u),g(p),g(s);var c=Y(s);K(c,5,()=>v().expenses,W,(x,h)=>{var o=nt(),d=b(o),q=b(d,!0);g(d);var D=Y(d);{var k=E=>{var I=at(),S=He(I),R=b(S,!0);g(S);var z=Y(S,2),oe=b(z,!0);g(z),A((ve,fe)=>{T(R,ve),T(oe,fe)},[()=>i(r).toDollarString(i(h).amount),()=>i(r).toFrequencyString(i(h).frequency)],X),C(E,I)},L=E=>{var I=rt(),S=b(I,!0);g(I),A(R=>T(S,R),[()=>i(r).toDollarString(i(r).changeFrequency(i(h).amount,i(h).frequency,i(r).currentFilter.frequency))],X),C(E,I)};Ye(D,E=>{i(r).filterIndex==0?E(k):E(L,!1)})}g(o),A(()=>T(q,i(h).name)),C(x,o)}),g(c),g(y),A(()=>T(m,v().name)),Je(_,()=>i(r).filterIndex,x=>Le(r,i(r).filterIndex=x)),C(f,y)},r=Me(et());Ge();var l=lt();K(l,5,()=>i(r).categories,W,(f,v)=>{a(f,()=>i(v))}),g(l),C(t,l),Re()}export{yt as component};
